controller:
  # Jenkins Controller Configuration
  image: "jenkins/jenkins"
  tag: "2.426.1-lts"
  
  # Resources
  resources:
    requests:
      cpu: "1000m"
      memory: "2Gi"
    limits:
      cpu: "2000m"
      memory: "4Gi"

  # Service configuration
  serviceType: LoadBalancer
  servicePort: 8080
  
  # Jenkins Configuration as Code
  JCasC:
    defaultConfig: true
    configScripts:
      welcome-message: |
        jenkins:
          systemMessage: "Jenkins for CI/CD Pipeline"
        
  # Security
  admin:
    existingSecret: ""
    userKey: jenkins-admin-user
    passwordKey: jenkins-admin-password

  # Plugins to install
installPlugins:
  - kubernetes
  - workflow-aggregator
  - git
  - configuration-as-code
  - pipeline-stage-view:2.21  
  - docker-workflow
  - blueocean
  - github
  - pipeline-github-lib
  - aws-credentials

  # Additional environment variables
  additionalExistingSecrets:
    - name: aws-credentials
      keyName: aws-access-key-id
    - name: aws-credentials
      keyName: aws-secret-access-key

# Agent configuration
agent:
  enabled: true
  image: "jenkins/inbound-agent"
  tag: "3107.v665000b_51092-5"
  
  # Kaniko agent for Docker builds
  podTemplates:
    kaniko: |
      - name: kaniko
        label: kaniko
        serviceAccount: jenkins-admin
        containers:
        - name: kaniko
          image: gcr.io/kaniko-project/executor:debug
          command: ["/busybox/cat"]
          tty: true
          volumeMounts:
          - name: aws-secret
            mountPath: /root/.aws/
        - name: git
          image: alpine/git:latest
          command: ["/bin/sh", "-c", "cat"]
          tty: true
        volumes:
        - name: aws-secret
          secret:
            secretName: aws-credentials

# Persistence
persistence:
  enabled: true
  storageClass: "gp2"
  size: "20Gi"
  accessMode: "ReadWriteOnce"

# Security Context
securityContext:
  runAsUser: 1000
  fsGroup: 1000
  
# Service Account
serviceAccount:
  create: false
  name: jenkins-admin

# RBAC
rbac:
  create: true
  readSecrets: true